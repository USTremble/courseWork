{% extends 'base.html' %}
{% block title %}Команда{% endblock %}
{% block content %}
<h1>Команда</h1>

{% if not team %}
    <div class="content-box" style="display:flex;gap:20px">
        <button class="btn btn-primary" data-modal="createModal">Создать команду</button>
        <button class="btn btn-outline" data-modal="joinModal">Присоединиться к команде</button>
    </div>
{% else %}
    <div class="content-box">
        <h2>{{ team.team_name }}</h2>
        <p>{{ team.description }}</p>
        <table class="admin-table" style="margin-top:16px">
            <thead><tr><th>UID</th><th>Логин</th></tr></thead>
            <tbody>
                {% for m in members %}<tr><td>{{ m.user_id }}</td><td>{{ m.username }}</td></tr>{% endfor %}
            </tbody>
        </table>
        <form method="post" action="{{ url_for('leave_team') }}">
            <button class="btn btn-outline" style="margin-top:16px">Покинуть команду</button>
        </form>
    </div>
{% endif %}

<!-- ─ modal create ─ -->
<div class="modal" id="createModal">
  <div class="modal-content">
    <span class="close">✖</span>
    <h2>Регистрация команды</h2>
    <form method="post" action="{{ url_for('create_team') }}">
        <label>Название команды</label>
        <input type="text" name="team_name" required>
        <label>Описание</label>
        <textarea name="description" rows="3"></textarea>
        <label>Код‑приглашение</label>
        <input type="text" name="invite_code" required>
        <button>Создать</button>
    </form>
  </div>
</div>

<!-- ─ modal join ─ -->
<div class="modal" id="joinModal">
  <div class="modal-content">
    <span class="close">✖</span>
    <h2>Присоединиться по коду</h2>
    <form method="post" action="{{ url_for('join_team') }}">
        <label>Код‑приглашение</label>
        <input type="text" name="invite_code" required>
        <button>Присоединиться</button>
    </form>
  </div>
</div>
{% endblock %}
